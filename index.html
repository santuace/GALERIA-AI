<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi Galería de Arte AI</title>
  <link rel="stylesheet" href="estilos_finales_definitivo.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

  <nav class="navbar">
    <div class="navbar-left">
      <img src="monograma.png" alt="Monograma" class="logo">
    </div>
    <div class="navbar-right">
      <a href="#" id="openAboutMe" class="nav-link">Sobre mí</a>
      <a href="https://www.linkedin.com/in/santiagomut/" class="nav-link" target="_blank">Contacto</a>
    </div>
  </nav>

  <main class="galeria"></main>

  <footer>
    <p>Hecho con amor y IA por Santiago Mut</p>
  </footer>

  <div id="imageModal" class="modal">
    <span class="close-button">&times;</span>
    <div class="modal-content-wrapper">
      <div id="modalMediaContainer"></div>
      <div id="modalInfoContainer" class="modal-info"></div>
    </div>
  </div>

  <div id="aboutMeModal" class="modal">
    <span class="close-button about-close-button">&times;</span>
    <div class="modal-content-wrapper">
      <div class="about-modal-content-wrapper">
        <div class="about-photo-container">
          <img src="sobremifoto.jpeg" alt="Tu foto" class="about-photo">
        </div>
        <div class="about-text-content">
          <h2>Sobre mí</h2>
          <p>Este no es un portfolio. Es un mood... Bienvenid@s a un hermoso caos.</p>
          <p>Soy Santiago... Porque al final, todo es un prompt.</p>
        </div>
      </div>
    </div>
  </div>

  <script src="gallery_data_restaurado.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    const imageModal          = document.getElementById('imageModal');
    const aboutMeModal        = document.getElementById('aboutMeModal');
    const modalMediaContainer = document.getElementById('modalMediaContainer');
    const modalInfoContainer  = document.getElementById('modalInfoContainer');
    const closeImageButton    = document.querySelector('#imageModal .close-button');
    const openAboutMeButton   = document.getElementById('openAboutMe');
    const closeAboutMeButton  = document.querySelector('#aboutMeModal .close-button');

    // Ocultamos modals al iniciar
    if (imageModal)   imageModal.style.display   = 'none';
    if (aboutMeModal) aboutMeModal.style.display = 'none';

    // ---------------------------------------------------
    // 1) Ordenamos array: las imágenes con número mayor primero
    // ---------------------------------------------------
    galleryImages.sort((a, b) => {
      const getNum = fn => {
        const m = fn.match(/\d+/);
        return m ? parseInt(m[0], 10) : 0;
      };
      return getNum(b.filename) - getNum(a.filename);
    });
    // ---------------------------------------------------

    // Renderizamos galería
    const gallery = document.querySelector('.galeria');
    galleryImages.forEach(image => {
      let mediaTag;
      if (image.type === "video") {
        mediaTag = `
          <video
            src="imagenes/${image.filename}"
            muted autoplay loop playsinline
            ${image.poster ? `poster="imagenes/${image.poster}"` : ''}>
          </video>`;
      } else {
        mediaTag = `<img
            src="imagenes/${image.filename}"
            alt="${image.title}"
            loading="lazy"
            width="300"
            height="200"
          >`;
      }

      const imageHtml = `
        <div class="imagen-item"
             data-type="${image.type}"
             data-filename="${image.filename}"
             data-title="${image.title}"
             data-prompt="${image.prompt}"
             data-model="${image.model || ''}"
             ${image.poster ? `data-poster="${image.poster}"` : ''}>
          ${mediaTag}
        </div>`;
      gallery.insertAdjacentHTML('beforeend', imageHtml);
    });

    // Abrir modal al clickear cada ítem
    const galleryItems = document.querySelectorAll('.imagen-item');
    galleryItems.forEach(item => {
      item.addEventListener('click', function() {
        const type     = this.dataset.type;
        const filename = this.dataset.filename;
        const title    = this.dataset.title;
        const prompt   = this.dataset.prompt;
        const model    = this.dataset.model;
        const poster   = this.dataset.poster;

        modalMediaContainer.innerHTML = '';
        modalInfoContainer.innerHTML  = '';

        if (type === "video") {
          const videoElement = document.createElement('video');
          videoElement.src        = `imagenes/${filename}`;
          videoElement.controls   = true;
          videoElement.autoplay   = true;
          videoElement.loop       = true;
          videoElement.muted      = false;
          videoElement.playsinline= true;
          videoElement.classList.add('modal-content');
          if (poster) videoElement.poster = `imagenes/${poster}`;
          modalMediaContainer.appendChild(videoElement);
        } else {
          const imgElement = document.createElement('img');
          imgElement.src   = `imagenes/${filename}`;
          imgElement.alt   = title;
          imgElement.classList.add('modal-content');
          modalMediaContainer.appendChild(imgElement);
        }

        // Info card
        modalInfoContainer.innerHTML = `
          <div class="modal-info-card">
            <div class="info-header">
              <svg class="info-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2zm.75 15h-1.5v-1.5h1.5V17zm0-3h-1.5V7h1.5v7z"/>
              </svg>
              <h4>Prompt</h4>
            </div>
            <div class="info-body">
              <p class="info-prompt">${prompt}</p>
              <div class="info-row"><span>Modelo</span><span>${model}</span></div>
              <div class="info-row"><span>Archivo</span><span>${filename}</span></div>
            </div>
          </div>`;
        imageModal.style.display = "flex";
      });
    });

    // Cerrar modal imagen
    closeImageButton.addEventListener('click', () => {
      imageModal.style.display = "none";
      const vid = modalMediaContainer.querySelector('video');
      if (vid) vid.pause();
    });
    imageModal.addEventListener('click', e => {
      if (e.target === imageModal) {
        imageModal.style.display = "none";
        const vid = modalMediaContainer.querySelector('video');
        if (vid) vid.pause();
      }
    });

    // Abrir/Cerrar modal “Sobre mí”
    openAboutMeButton.addEventListener('click', e => {
      e.preventDefault();
      aboutMeModal.style.display = "flex";
    });
    closeAboutMeButton.addEventListener('click', () => {
      aboutMeModal.style.display = "none";
    });
    aboutMeModal.addEventListener('click', e => {
      if (e.target === aboutMeModal) {
        aboutMeModal.style.display = "none";
      }
    });
  });
  </script>
</body>
</html>
